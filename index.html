<!DOCTYPE html>
<html lang="hi">
<head>
  <meta name="google-site-verification" content="z_K7rbQOo3ue3IHN5-3EiFA0WfsIAfL_yqUjXEisCWE" />
  <meta charset="UTF-8">
  <title>Online Chating – Login</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">

  <style>
    *{box-sizing:border-box;margin:0;padding:0}
    body,html{height:100%}
    body{
      font-family:'Poppins',sans-serif;
      color:#fff;
      display:flex;
      align-items:center;
      justify-content:center;
      overflow:hidden;
    }
    video.bg-video{
      position:fixed;top:0;left:0;width:100%;height:100%;
      object-fit:cover;z-index:-2;
    }
    .overlay{
      position:fixed;top:0;left:0;width:100%;height:100%;
      background:rgba(0,0,0,.45);z-index:-1;
    }
    .card{
      width:90%;max-width:380px;padding:32px 28px 40px;
      background:rgba(255,255,255,.12);
      backdrop-filter:blur(14px);
      border-radius:18px;text-align:center;
      box-shadow:0 8px 24px rgba(0,0,0,.3);
    }
    header{font-size:30px;font-weight:600;margin-bottom:26px;text-transform:capitalize}
    select,button{
      width:100%;padding:13px 14px;font-size:15px;
      border:none;border-radius:10px;margin-bottom:14px;outline:none;
    }
    select{background:rgba(255,255,255,.85);color:#333}
    .google-btn{
      display:flex;align-items:center;justify-content:center;gap:8px;
      background:#fff;color:#4285F4;font-weight:600;transition:.25s;cursor:pointer;
    }
    .google-btn:hover{background:#f0f0f0}
    #error-message{color:#ffbebc;font-size:14px;margin-top:4px;min-height:18px}
    footer{margin-top:20px;font-size:13px;color:#eee}
    footer label{display:flex;align-items:center;justify-content:center;gap:10px;margin-bottom:6px}
    footer a{color:#a6ffd1;text-decoration:underline}
    input[type="checkbox"]{
      appearance:none;width:40px;height:22px;background:#ccc;border-radius:15px;position:relative;cursor:pointer
    }
    input[type="checkbox"]::before{
      content:"";position:absolute;width:18px;height:18px;border-radius:50%;
      background:#fff;top:2px;left:2px;transition:.3s
    }
    input[type="checkbox"]:checked{background:#4caf50}
    input[type="checkbox"]:checked::before{transform:translateX(18px)}
  </style>
</head>
<body>

  <video class="bg-video" src="Web.mp4" autoplay muted loop playsinline></video>
  <div class="overlay"></div>

  <div class="card">
    <header>Welcome</header>

    <select id="countrySelect">
      <option value="" disabled selected>Select Country</option>
    </select>

    <select id="genderSelect">
      <option value="" disabled selected>Select Gender</option>
      <option value="male">♂️ Male</option>
      <option value="female">♀️ Female</option>
    </select>

    <button class="google-btn" id="googleLoginBtn">
      <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" alt="" width="18">
      Login with Google
    </button>

    <div id="error-message"></div>

    <footer>
      <label>
        <input type="checkbox" id="ageCheck">
        I confirm that I am at least 18 years old.
      </label>
      I accept <a href="parivcy.html" target="_blank">User Agreement</a>.
    </footer>
  </div>

  <!-- Firebase SDK (Modular Version) -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.14.0/firebase-app.js";
    import { getAuth, GoogleAuthProvider, signInWithPopup } from "https://www.gstatic.com/firebasejs/10.14.0/firebase-auth.js";

    // ==== Firebase Config ====
    const firebaseConfig = {
      apiKey: "AIzaSyDSkJSGENrygwybOBv-sDqH8PTK5sFdjcU",
      authDomain: "online-chating-909f6.firebaseapp.com",
      databaseURL: "https://online-chating-909f6-default-rtdb.firebaseio.com",
      projectId: "online-chating-909f6",
      storageBucket: "online-chating-909f6.firebasestorage.app",
      messagingSenderId: "492094035611",
      appId: "1:492094035611:web:d657ec0e94e1e5b885d83e"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const provider = new GoogleAuthProvider();

    // ==== Country List ====
    const countries = [
      "India","United States","United Kingdom","Australia","Canada","Germany","France","Japan","China","Brazil","Mexico",
      "South Africa","Russia","Italy","Spain","Indonesia","Netherlands","Sweden","Switzerland","Turkey","Nepal","Bangladesh",
      "Pakistan","Sri Lanka","New Zealand","UAE","Saudi Arabia"
    ];
    const countrySelect = document.getElementById('countrySelect');
    countries.forEach(c=>{
      const o=document.createElement('option');
      o.value=o.textContent=c;
      countrySelect.appendChild(o);
    });

    const errorMsg = document.getElementById('error-message');

    // ==== Login Function ====
    document.getElementById("googleLoginBtn").addEventListener("click", async ()=>{
      const country = countrySelect.value;
      const gender  = document.getElementById('genderSelect').value;
      const is18    = document.getElementById('ageCheck').checked;

      if(!country){errorMsg.textContent="Please select your country!";return}
      if(!gender){errorMsg.textContent="Please select your gender!";return}
      if(!is18){errorMsg.textContent="You must confirm you are 18+.";return}
      errorMsg.textContent="";

      try{
        const result = await signInWithPopup(auth, provider);
        const user = result.user;

        sessionStorage.setItem('userName', user.displayName);
        sessionStorage.setItem('userEmail', user.email);
        sessionStorage.setItem('userUID', user.uid);
        sessionStorage.setItem('userCountry', country);
        sessionStorage.setItem('userGender', gender);

        alert("Login Successful! Welcome " + user.displayName);
        window.location.href = "chating.html";
      }catch(err){
        console.error(err);
        errorMsg.textContent="Google Login failed. Try again.";
      }
    });
  </script>
</body>
  </html>
  
